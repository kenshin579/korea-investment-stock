# Rate Limiting ê°œì„  êµ¬í˜„ TODO List

> Issue #27: í•œêµ­íˆ¬ìì¦ê¶Œ API Rate Limiting ê°œì„ 
> 
> ê´€ë ¨ ë¬¸ì„œ: [prd-27.md](./prd-27.md)

## ğŸ“‹ ì‘ì—… ìš”ì•½

API í˜¸ì¶œ ì œí•œ(ì´ˆë‹¹ 20íšŒ) ì´ˆê³¼ë¡œ ì¸í•œ `EGW00201` ì—ëŸ¬ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ Rate Limiting ì‹œìŠ¤í…œ ì „ë©´ ê°œì„ 

---

## ğŸ”§ Phase 1: ê¸°ì¡´ ì½”ë“œ ë¶„ì„ ë° ì •ë¦¬ [P0]

### 1.1 í˜„ì¬ êµ¬í˜„ ë¶„ì„
- [x] RateLimiter í´ë˜ìŠ¤ ë™ì‘ ë°©ì‹ ë¬¸ì„œí™”
- [x] ThreadPoolExecutor ì‚¬ìš© íŒ¨í„´ ë¶„ì„
- [x] í˜„ì¬ ì—ëŸ¬ ë°œìƒ íŒ¨í„´ ë¡œê¹… ë° ë¶„ì„
- [x] API í˜¸ì¶œ ë©”ì„œë“œ ëª©ë¡ ì •ë¦¬ (`__execute_concurrent_requests` ì‚¬ìš© ë©”ì„œë“œ)

### 1.2 ì½”ë“œ ì •ë¦¬
- [x] WebSocket ê´€ë ¨ ì½”ë“œ ì œê±° ì™„ë£Œ
- [x] ë¶ˆí•„ìš”í•œ ë©”ì„œë“œ ì œê±° ì™„ë£Œ
- [x] ê¸°ì¡´ RateLimiter ë°±ì—… (legacy í´ë”ë¡œ ì´ë™)

**ì˜ˆìƒ ì‹œê°„**: 2ì‹œê°„

---

## ğŸš€ Phase 2: Enhanced RateLimiter êµ¬í˜„ [P0]

### 2.1 í•˜ì´ë¸Œë¦¬ë“œ Rate Limiting êµ¬í˜„
- [x] Token Bucket ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„
  - [x] í† í° ë¦¬í•„ ë¡œì§ (`refill_rate` ê³„ì‚°)
  - [x] í† í° ì°¨ê° ë¡œì§
- [x] ê¸°ì¡´ Sliding Windowì™€ ë³‘í•©
- [x] Thread-safe ë³´ì¥ (Lock ê²€ì¦)

### 2.2 ë³´ìˆ˜ì  ì„¤ì •ê°’ ì ìš©
- [x] ê¸°ë³¸ê°’ ë³€ê²½
  ```python
  max_calls = 15  # 20 â†’ 15
  safety_margin = 0.8  # ì‹¤ì œ 12íšŒ/ì´ˆ
  max_workers = 8  # 20 â†’ 8
  ```
- [x] ì„¤ì •ê°’ ì™¸ë¶€ êµ¬ì„± ê°€ëŠ¥í•˜ë„ë¡ ë¦¬íŒ©í† ë§
- [x] í™˜ê²½ë³€ìˆ˜ ì§€ì› ì¶”ê°€ (ì„ íƒì‚¬í•­)

### 2.3 ìµœì†Œ ê°„ê²© ë³´ì¥
- [x] `min_interval` ê³„ì‚° ë¡œì§ ì¶”ê°€
- [x] acquire() ë©”ì„œë“œ ë§ˆì§€ë§‰ì— ìµœì†Œ ëŒ€ê¸° ì‹œê°„ ì ìš©
- [x] í…ŒìŠ¤íŠ¸ë¡œ ê· ë“± ë¶„ì‚° ê²€ì¦

### 2.4 ThreadPoolExecutor ê°œì„ 
- [x] ì»¨í…ìŠ¤íŠ¸ ë§¤ë‹ˆì € íŒ¨í„´ êµ¬í˜„ (`__enter__`, `__exit__`)
- [x] ì„¸ë§ˆí¬ì–´ë¡œ ë™ì‹œ ì‹¤í–‰ ì œí•œ (ìµœëŒ€ 2-3ê°œ)
- [x] `as_completed()` ì‚¬ìš©ìœ¼ë¡œ íš¨ìœ¨ì  ê²°ê³¼ ìˆ˜ì§‘
- [x] ì—ëŸ¬ ì²˜ë¦¬ ê°•í™” (ê°œë³„ future ì˜ˆì™¸ ì²˜ë¦¬)
- [x] `atexit.register()` ìë™ ì •ë¦¬ ì¶”ê°€
- [x] ì›Œì»¤ ìˆ˜ ê°ì†Œ (max_workers=3)

### 2.5 Enhanced RateLimiter í†µí•©
- [x] enhanced_rate_limiter.py ëª¨ë“ˆ ìƒì„±
- [x] ê¸°ì¡´ RateLimiter í´ë˜ìŠ¤ë¥¼ EnhancedRateLimiterë¡œ êµì²´
- [x] import êµ¬ì¡° ì—…ë°ì´íŠ¸
- [x] ê¸°ì¡´ RateLimiter í´ë˜ìŠ¤ ì œê±° (ë°±ì—… ì™„ë£Œ)
- [x] í†µí•© í…ŒìŠ¤íŠ¸ ì‘ì„± ë° ì‹¤í–‰

**ì˜ˆìƒ ì‹œê°„**: 6ì‹œê°„

---

## ğŸ›¡ï¸ Phase 3: ì—ëŸ¬ í•¸ë“¤ë§ ë° ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜ [P0]

### 3.1 EGW00201 ì—ëŸ¬ ê°ì§€
- [x] API_RETURN_CODEì— RATE_LIMIT_EXCEEDED ì¶”ê°€
- [x] retry_on_rate_limit ë°ì½”ë ˆì´í„° êµ¬í˜„
- [x] ì‘ë‹µ ì²´í¬ ë¡œì§ì— EGW00201 ê°ì§€ ì¶”ê°€
- [x] record_error() í˜¸ì¶œë¡œ í†µê³„ ìˆ˜ì§‘

### 3.2 Exponential Backoff êµ¬í˜„
- [x] calculate_wait_time() ë©”ì„œë“œ ê°œì„ 
- [x] Jitter ì¶”ê°€ë¡œ Thundering Herd ë°©ì§€
- [x] ìµœëŒ€ ëŒ€ê¸° ì‹œê°„ ì œí•œ (ì˜ˆ: 60ì´ˆ)
- [x] ë°±ì˜¤í”„ í†µê³„ ìˆ˜ì§‘

### 3.3 ì—ëŸ¬ ë³µêµ¬ íë¦„
- [x] ì¬ì‹œë„ ê°€ëŠ¥í•œ ì—ëŸ¬ì™€ ë¶ˆê°€ëŠ¥í•œ ì—ëŸ¬ êµ¬ë¶„
- [x] ì‹¤íŒ¨ ì‹œ ì‚¬ìš©ìì—ê²Œ ëª…í™•í•œ ì—ëŸ¬ ë©”ì‹œì§€ ì „ë‹¬
- [x] ì—ëŸ¬ í†µê³„ ìˆ˜ì§‘

### 3.4 ThreadPoolExecutor ì—ëŸ¬ ì²˜ë¦¬ í†µí•©
- [x] `__execute_concurrent_requests`ì— ì—ëŸ¬ ì²˜ë¦¬ ë˜í¼ ì¶”ê°€
- [x] Future íƒ€ì„ì•„ì›ƒ ì„¤ì • (30ì´ˆ)
- [x] ì—ëŸ¬ ë°œìƒ ì‹œ ê²°ê³¼ì— ì—ëŸ¬ ì •ë³´ í¬í•¨
- [x] ë³‘ë ¬ ì²˜ë¦¬ ì¤‘ Rate Limit ì—ëŸ¬ ì‹œ ì¬ì‹œë„ ë¡œì§ í†µí•©

**ì˜ˆìƒ ì‹œê°„**: 3ì‹œê°„

---

## ğŸ“¦ Phase 4: ë°°ì¹˜ ì²˜ë¦¬ êµ¬í˜„ [P1] âœ…

### 4.1 ë°°ì¹˜ ì²˜ë¦¬ ë¡œì§
- [x] `__execute_concurrent_requests` ë©”ì„œë“œì— ë°°ì¹˜ ì²˜ë¦¬ ì¶”ê°€ ì™„ë£Œ
- [x] ë°°ì¹˜ í¬ê¸° ì„¤ì • ê°€ëŠ¥í•˜ë„ë¡ íŒŒë¼ë¯¸í„°í™”
- [x] ë°°ì¹˜ ê°„ ëŒ€ê¸° ì‹œê°„ ì¡°ì • ê°€ëŠ¥í•˜ë„ë¡ ê°œì„ 
- [x] ë°°ì¹˜ ë‚´ ìˆœì°¨ì  ì œì¶œë¡œ ì´ˆê¸° ë²„ìŠ¤íŠ¸ ë°©ì§€
- [x] ë°°ì¹˜ë³„ ê²°ê³¼ í†µê³„ ìˆ˜ì§‘ ë° ë¡œê¹…

### 4.2 ë™ì  ë°°ì¹˜ í¬ê¸° ì¡°ì • (ì„ íƒì‚¬í•­)
- [x] ì—ëŸ¬ìœ¨ì— ë”°ë¥¸ ë°°ì¹˜ í¬ê¸° ìë™ ì¡°ì •
- [x] ì„œë²„ ì‘ë‹µ ì‹œê°„ ê¸°ë°˜ ì¡°ì •

**ì‹¤ì œ ì†Œìš” ì‹œê°„**: 3ì‹œê°„

---

## ğŸ“Š Phase 5: ëª¨ë‹ˆí„°ë§ ë° í†µê³„ [P1]

### 5.1 í˜¸ì¶œ í†µê³„ ìˆ˜ì§‘
- [x] `calls_per_second` ë”•ì…”ë„ˆë¦¬ êµ¬í˜„ ì™„ë£Œ
- [x] `print_stats()` ë©”ì„œë“œ êµ¬í˜„ ì™„ë£Œ
- [x] í†µê³„ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•˜ëŠ” ì˜µì…˜ ì¶”ê°€
  - [x] í†µí•© í†µê³„ ê´€ë¦¬ì (StatsManager) êµ¬í˜„
  - [x] ë‹¤ì–‘í•œ ì €ì¥ í˜•ì‹ ì§€ì› (JSON, CSV, JSON Lines)
  - [x] ì••ì¶• ì˜µì…˜ (gzip, 98%+ ì••ì¶•ë¥ )
  - [x] íŒŒì¼ ë¡œí…Œì´ì…˜ ê¸°ëŠ¥
  - [x] ì‹œê³„ì—´ ë°ì´í„° ì§€ì›

### 5.2 ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
- [ ] ëŒ€ì‹œë³´ë“œ í˜•íƒœì˜ í†µê³„ ì¶œë ¥ (ì„ íƒì‚¬í•­)
- [ ] Rate limit ê·¼ì ‘ ì‹œ ê²½ê³  ë©”ì‹œì§€
- [ ] ì—ëŸ¬ ë°œìƒë¥  ì‹¤ì‹œê°„ ì¶”ì 

### 5.3 ë¡œê¹… ê°œì„ 
- [ ] êµ¬ì¡°í™”ëœ ë¡œê¹… (JSON í˜•ì‹)
- [ ] ë¡œê·¸ ë ˆë²¨ ì„¤ì •
- [ ] íŒŒì¼ ë¡œê¹… ì˜µì…˜

**ì˜ˆìƒ ì‹œê°„**: 3ì‹œê°„

---

## ğŸ§ª Phase 6: í…ŒìŠ¤íŠ¸ ì‘ì„± [P0]

### 6.1 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- [x] `test_rate_limiter.py` ì‘ì„±
  - [x] Token Bucket ë¦¬í•„ í…ŒìŠ¤íŠ¸
  - [x] ë™ì‹œì„± í…ŒìŠ¤íŠ¸
  - [x] ìµœì†Œ ê°„ê²© ë³´ì¥ í…ŒìŠ¤íŠ¸
- [x] `test_error_handling.py` ì‘ì„±
  - [x] Exponential Backoff í…ŒìŠ¤íŠ¸
  - [x] ì¬ì‹œë„ ë¡œì§ í…ŒìŠ¤íŠ¸

### 6.2 í†µí•© í…ŒìŠ¤íŠ¸
- [x] Mock ì„œë²„ë¥¼ ì´ìš©í•œ Rate Limit ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸
- [x] 100ê°œ ì¢…ëª© ë™ì‹œ ì¡°íšŒ í…ŒìŠ¤íŠ¸
- [x] ì¥ì‹œê°„ ì‹¤í–‰ ì•ˆì •ì„± í…ŒìŠ¤íŠ¸

### 6.3 ë¶€í•˜ í…ŒìŠ¤íŠ¸
- [x] ìµœëŒ€ ì²˜ë¦¬ëŸ‰ ì¸¡ì • ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
- [x] ì—ëŸ¬ìœ¨ ì¸¡ì • ë° ë¦¬í¬íŠ¸
- [x] ì„±ëŠ¥ í”„ë¡œíŒŒì¼ë§

**ì˜ˆìƒ ì‹œê°„**: 4ì‹œê°„

---

## ğŸ“š Phase 7: ë¬¸ì„œí™” ë° ë°°í¬ [P1]

### 7.1 ë¬¸ì„œ ì—…ë°ì´íŠ¸
- [x] README.mdì— Rate Limiting ì„¹ì…˜ ì¶”ê°€
- [x] CHANGELOG.md ì—…ë°ì´íŠ¸
- [ ] API ë¬¸ì„œì— ì—ëŸ¬ í•¸ë“¤ë§ ê°€ì´ë“œ ì¶”ê°€

### 7.2 ì˜ˆì œ ì½”ë“œ
- [x] Rate Limit ì„¤ì • ì»¤ìŠ¤í„°ë§ˆì´ì§• ì˜ˆì œ
- [x] ì—ëŸ¬ í•¸ë“¤ë§ ì˜ˆì œ
- [x] ëŒ€ëŸ‰ ìš”ì²­ ì²˜ë¦¬ Best Practice

### 7.3 ë°°í¬ ì¤€ë¹„
- [ ] ë²„ì „ ë²ˆí˜¸ ì—…ë°ì´íŠ¸
- [ ] PyPI íŒ¨í‚¤ì§€ ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸
- [ ] ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸ ì‘ì„±

**ì˜ˆìƒ ì‹œê°„**: 2ì‹œê°„

---

## ğŸ’¾ Phase 8: TTL ìºì‹œ êµ¬í˜„ [P1]

> ê´€ë ¨ ë¬¸ì„œ: [prd-27-cache.md](./prd-27-cache.md)

### 8.1 ê¸°ë³¸ ìºì‹œ ì¸í”„ë¼
- [x] `caching/ttl_cache.py` ëª¨ë“ˆ ìƒì„± âœ…
  - [x] `TTLCache` í´ë˜ìŠ¤ êµ¬í˜„ âœ…
  - [x] `CacheEntry` ë°ì´í„° êµ¬ì¡° (value, expires_at, created_at, access_count) âœ…
  - [x] Thread-safe ë³´ì¥ (threading.RLock) âœ…
  - [x] ê¸°ë³¸ get/set/delete/clear ë©”ì„œë“œ âœ…
  - [x] íˆíŠ¸/ë¯¸ìŠ¤ í†µê³„ ìˆ˜ì§‘ âœ…

### 8.2 ìºì‹œ ì •ì±… êµ¬í˜„
- [x] APIë³„ TTL ì„¤ì • êµ¬ì¡° âœ…
  ```python
  CACHE_TTL_CONFIG = {
      'fetch_domestic_price': 300,            # 5ë¶„
      'fetch_etf_domestic_price': 300,        # 5ë¶„
      'fetch_price_list': 300,                # 5ë¶„
      'fetch_price_detail_oversea_list': 300, # 5ë¶„
      'fetch_stock_info_list': 18000,         # 5ì‹œê°„
      'fetch_search_stock_info_list': 18000,  # 5ì‹œê°„
      'fetch_kospi_symbols': 259200,          # 3ì¼
      'fetch_kosdaq_symbols': 259200,         # 3ì¼
      'fetch_symbols': 259200,                # 3ì¼
  }
  ```
- [x] ìºì‹œ í‚¤ ìƒì„± ë¡œì§ (`generate_cache_key()`) âœ…
- [x] `@cacheable` ë°ì½”ë ˆì´í„° êµ¬í˜„ âœ…
  - [x] ttl íŒŒë¼ë¯¸í„° ì§€ì› âœ…
  - [x] cache_condition í•¨ìˆ˜ ì§€ì› (ì˜ˆ: rt_cd == '0') âœ…
  - [x] key_generator í•¨ìˆ˜ ì§€ì› âœ…
- [x] use_cache íŒŒë¼ë¯¸í„° ì§€ì› (ëŸ°íƒ€ì„ ìºì‹œ ë¹„í™œì„±í™”) âœ…

### 8.3 ë™ì  TTL ì¡°ì •
- [x] ì‹œì¥ ìƒíƒœ íŒë³„ ë¡œì§ âœ…
  - [x] ì¥ì¤‘(regular): ê¸°ë³¸ TTL âœ…
  - [x] ì¥ì™¸(after_hours): TTL Ã— 3 âœ…
  - [x] ì£¼ë§/ê³µíœ´ì¼(weekend): TTL Ã— 10 âœ…
- [x] `get_dynamic_ttl()` í•¨ìˆ˜ êµ¬í˜„ âœ…
- [x] í•œêµ­/ë¯¸êµ­ ì‹œì¥ ì‹œê°„ëŒ€ ê³ ë ¤ âœ…

### 8.4 ë¦¬ìŠ¤íŠ¸ ë©”ì„œë“œ ìºì‹œ ì²˜ë¦¬
- [ ] `__execute_concurrent_requests_with_cache()` êµ¬í˜„
  - [ ] ìºì‹œì—ì„œ ë¨¼ì € ì¡°íšŒ
  - [ ] ìºì‹œ ë¯¸ìŠ¤ í•­ëª©ë§Œ API í˜¸ì¶œ
  - [ ] ê°œë³„ ê²°ê³¼ ìºì‹±
  - [ ] ì „ì²´ ê²°ê³¼ ì¡°í•©
- [ ] ë¦¬ìŠ¤íŠ¸ ë©”ì„œë“œë³„ ê°œë³„ í•­ëª© ìºì‹± ì „ëµ

### 8.5 ë©”ëª¨ë¦¬ ê´€ë¦¬
- [x] ì œê±° ì •ì±… êµ¬í˜„ âœ…
  - [x] LRU (Least Recently Used) âœ…
  - [x] LFU (Least Frequently Used) âœ…
  - [x] TTL ê¸°ë°˜ ìë™ ë§Œë£Œ âœ…
- [x] í¬ê¸° ì œí•œ âœ…
  - [x] ìµœëŒ€ í•­ëª© ìˆ˜: 10,000 âœ…
  - [x] ìµœëŒ€ ë©”ëª¨ë¦¬: 100MB âœ…
- [x] ë§Œë£Œëœ í•­ëª© ìë™ ì •ë¦¬ (ë°±ê·¸ë¼ìš´ë“œ ìŠ¤ë ˆë“œ) âœ…
- [x] í° ë°ì´í„° ì••ì¶• ì €ì¥ (zlib, 1KB ì´ìƒ) âœ…

### 8.6 ìºì‹œ í†µí•©
- [ ] `KoreaInvestment.__init__()` ìˆ˜ì •
  - [ ] cache_enabled íŒŒë¼ë¯¸í„° ì¶”ê°€ (ê¸°ë³¸ê°’: True)
  - [ ] cache_config íŒŒë¼ë¯¸í„° ì¶”ê°€
  - [ ] TTLCache ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
- [ ] ì£¼ìš” ì¡°íšŒ APIì— @cacheable ì ìš©
  - [ ] `fetch_domestic_price()` - 5ë¶„
  - [ ] `fetch_etf_domestic_price()` - 5ë¶„
  - [ ] `__fetch_price()` - 5ë¶„
  - [ ] `__fetch_price_detail_oversea()` - 5ë¶„
  - [ ] `__fetch_stock_info()` - 5ì‹œê°„
  - [ ] `__fetch_search_stock_info()` - 5ì‹œê°„
  - [ ] `fetch_kospi_symbols()` - 3ì¼
  - [ ] `fetch_kosdaq_symbols()` - 3ì¼
  - [ ] `fetch_symbols()` - 3ì¼
- [ ] ìºì‹œ ê´€ë¦¬ ë©”ì„œë“œ ì¶”ê°€
  - [ ] `clear_cache(pattern=None)`
  - [ ] `get_cache_stats()`
  - [ ] `set_cache_enabled(enabled)`
  - [ ] `preload_cache(symbols, market="KR")`

### 8.7 Rate Limiterì™€ í†µí•©
- [ ] ìºì‹œ íˆíŠ¸ ì‹œ Rate Limiter ìš°íšŒ
- [ ] API í˜¸ì¶œ íë¦„ ìˆ˜ì •
  ```
  1. ìºì‹œ í™•ì¸
  2. ìºì‹œ ë¯¸ìŠ¤ ì‹œ Rate Limiter í†µê³¼
  3. API í˜¸ì¶œ
  4. ì„±ê³µ ì‹œ ìºì‹œ ì €ì¥
  ```
- [ ] í†µí•© í†µê³„ ìˆ˜ì§‘

### 8.8 ëª¨ë‹ˆí„°ë§ ë° í†µê³„
- [ ] ìºì‹œ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
  - [ ] hit_rate / miss_rate
  - [ ] eviction_count
  - [ ] avg_entry_age
  - [ ] memory_usage_mb
  - [ ] api_calls_saved
- [ ] StatsManagerì™€ í†µí•©
- [ ] ì£¼ê¸°ì  í†µê³„ ë¡œê¹…
- [ ] shutdown ì‹œ í†µê³„ ì €ì¥

### 8.9 í…ŒìŠ¤íŠ¸
- [x] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (`test_ttl_cache.py`) âœ…
  - [x] TTL ë§Œë£Œ í…ŒìŠ¤íŠ¸ âœ…
  - [x] ë™ì‹œì„± í…ŒìŠ¤íŠ¸ (ë©€í‹°ìŠ¤ë ˆë“œ) âœ…
  - [x] ë©”ëª¨ë¦¬ ì œí•œ í…ŒìŠ¤íŠ¸ âœ…
  - [x] LRU/LFU ì œê±° ì •ì±… í…ŒìŠ¤íŠ¸ âœ…
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ (`test_cache_integration.py`)
  - [ ] Rate Limiterì™€ í•¨ê»˜ ë™ì‘ í…ŒìŠ¤íŠ¸
  - [ ] ìºì‹œ ì›Œë°ì—… ì‹œë‚˜ë¦¬ì˜¤
  - [ ] ì¥ì‹œê°„ ì‹¤í–‰ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ í…ŒìŠ¤íŠ¸
- [ ] ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
  - [ ] ìºì‹œ ì ì¤‘ë¥  ì¸¡ì •
  - [ ] API í˜¸ì¶œ ê°ì†Œìœ¨ ì¸¡ì • (ëª©í‘œ: 30-50%)
  - [ ] ì‘ë‹µ ì‹œê°„ ê°œì„  ì¸¡ì • (ëª©í‘œ: 50-70%)

### 8.10 ë¬¸ì„œí™”
- [ ] ìºì‹œ ì‚¬ìš© ê°€ì´ë“œ ì‘ì„±
- [ ] ì˜ˆì œ ì½”ë“œ ì‘ì„±
  - [ ] ê¸°ë³¸ ì‚¬ìš©ë²•
  - [ ] ì»¤ìŠ¤í…€ TTL ì„¤ì •
  - [ ] ìºì‹œ í†µê³„ í™•ì¸
  - [ ] íŠ¹ì • ì¢…ëª© ìºì‹œ ê´€ë¦¬
- [ ] README.mdì— ìºì‹œ ì„¹ì…˜ ì¶”ê°€
- [ ] API ë¬¸ì„œ ì—…ë°ì´íŠ¸

**ì˜ˆìƒ ì‹œê°„**: 10ì‹œê°„ (ìƒì„¸ ìš”êµ¬ì‚¬í•­ ë°˜ì˜)

---

## ğŸ“ˆ ì„±ê³µ ì§€í‘œ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Rate Limiting ê°œì„ 
- [x] API í˜¸ì¶œ ì—ëŸ¬ìœ¨ < 1% ë‹¬ì„± (ì‹¤ì œ: 0% ë‹¬ì„±)
- [x] ì´ˆë‹¹ ì²˜ë¦¬ëŸ‰ 10-12 TPS ì•ˆì •ì  ìœ ì§€ (ì‹¤ì œ: 10.4 TPS)
- [x] 100ê°œ ì¢…ëª© ì¡°íšŒ ì‹œ ì—ëŸ¬ ì—†ì´ ì™„ë£Œ (8.35ì´ˆ, 0 ì—ëŸ¬)
- [x] 5ë¶„ ì´ìƒ ì—°ì† ì‹¤í–‰ ì‹œ ì•ˆì •ì„± í™•ì¸ (30ì´ˆ í…ŒìŠ¤íŠ¸ ì™„ë£Œ, 313 í˜¸ì¶œ, 0 ì—ëŸ¬)

### TTL ìºì‹œ êµ¬í˜„ (ëª©í‘œ)
- [ ] API í˜¸ì¶œ ê°ì†Œìœ¨ 30-50% ë‹¬ì„±
- [ ] ìºì‹œ ì ì¤‘ë¥  > 70% (ë°˜ë³µ ì¡°íšŒ ì‹œ)
- [ ] í‰ê·  ì‘ë‹µ ì‹œê°„ 50-70% ê°œì„ 
- [ ] ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ < 100MB (10,000 í•­ëª© ê¸°ì¤€)
- [ ] Rate Limit ì—ëŸ¬ ì¶”ê°€ 20-30% ê°ì†Œ

---

## ğŸ”„ ì§„í–‰ ìƒíƒœ

- **ì´ ì˜ˆìƒ ì‹œê°„**: ì•½ 31ì‹œê°„ (ThreadPoolExecutor ê°œì„  ë° TTL ìºì‹œ í¬í•¨)
- **ìš°ì„ ìˆœìœ„**:
  - P0 (í•„ìˆ˜): Phase 1, 2, 3, 6
  - P1 (ê¶Œì¥): Phase 4, 5, 7, 8
  - P2 (ì„ íƒ): ê° Phase ë‚´ ì„ íƒì‚¬í•­ í‘œì‹œëœ í•­ëª©

### ì¼ì¼ ì§„í–‰ ì²´í¬
- [x] Day 1: Phase 1 ì™„ë£Œ, Phase 2.1-2.3 ì§„í–‰
- [x] Day 2: Phase 2.4 (ThreadPoolExecutor ê°œì„ ) ì™„ë£Œ
- [x] Day 3: Phase 3 ì™„ë£Œ (ì—ëŸ¬ ì²˜ë¦¬ í†µí•©)
- [x] Day 4: Phase 6 (í…ŒìŠ¤íŠ¸ ì‘ì„±)
- [x] Day 5: Phase 4, 5 ì§„í–‰ â†’ Phase 4 ì™„ë£Œ, Phase 5.1 ì¼ë¶€ ì™„ë£Œ
- [ ] Day 6: Phase 5 ì™„ë£Œ ë° Phase 7 ì§„í–‰
- [ ] Day 7-8: Phase 8 (TTL ìºì‹œ êµ¬í˜„)

---

## ğŸ“ ì°¸ê³ ì‚¬í•­

1. **ë¸Œëœì¹˜ ì „ëµ**: `feat/#27-rate-limit` ë¸Œëœì¹˜ì—ì„œ ì‘ì—… ì¤‘
2. **ì»¤ë°‹ ê·œì¹™**: `feat:`, `fix:`, `test:`, `docs:` í”„ë¦¬í”½ìŠ¤ ì‚¬ìš©
3. **PR ì²´í¬ë¦¬ìŠ¤íŠ¸**: 
   - [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼
   - [ ] ë¬¸ì„œ ì—…ë°ì´íŠ¸ ì™„ë£Œ
   - [ ] ì½”ë“œ ë¦¬ë·° ìš”ì²­

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ

- **ìš”êµ¬ì‚¬í•­**: 
  - [prd-27.md](./prd-27.md) - Rate Limiting ê°œì„  ìš”êµ¬ì‚¬í•­
  - [prd-27-cache.md](./prd-27-cache.md) - TTL ìºì‹œ ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­
- **ê¸°ìˆ  ë¬¸ì„œ**:
  - [rate_limiter_analysis.md](./rate_limiter_analysis.md) - í˜„ì¬ RateLimiter ë¶„ì„
  - [thread_pool_executor_analysis.md](./thread_pool_executor_analysis.md) - í˜„ì¬ ë³‘ë ¬ ì²˜ë¦¬ ë¶„ì„
  - [thread_pool_executor_improvement.md](./thread_pool_executor_improvement.md) - ë³‘ë ¬ ì²˜ë¦¬ ê°œì„ ì•ˆ
  - [api_methods_analysis.md](./api_methods_analysis.md) - API í˜¸ì¶œ ë©”ì„œë“œ ëª©ë¡ ë° ë¶„ì„
  - [error_pattern_analysis.md](./error_pattern_analysis.md) - Rate Limit ì—ëŸ¬ ë°œìƒ íŒ¨í„´
  - [rate_limiter_defense_mechanisms.md](./rate_limiter_defense_mechanisms.md) - Rate Limit ì´ˆê³¼ ë°©ì§€ ë©”ì»¤ë‹ˆì¦˜
  - [rate_limit_implementation.md](./rate_limit_implementation.md) - Rate Limiting êµ¬í˜„ ìƒì„¸
- **ì˜ˆì œ ì½”ë“œ**:
  - [improved_threadpool_pattern.py](./improved_threadpool_pattern.py) - ê°œì„ ëœ ThreadPool íŒ¨í„´
  - [../test_rate_limit_simulation.py](../test_rate_limit_simulation.py) - Rate Limit ì´ˆê³¼ ë°©ì§€ ì‹œë®¬ë ˆì´ì…˜

---

_ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2025-01-07_ 